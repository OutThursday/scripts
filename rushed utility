local Utility = {}

warn("Made by Shally122368 Group!")

local CoreGuiService = game:GetService("CoreGui")
local GuiService = game:GetService("GuiService")

function Utility.CreateLibrary(title:string)
	local Utility2 = {}
	local Pages = {}
	local currentPage = 1
	local PageChanged = Instance.new("BindableEvent")
	local function CreateUtility()
		local CustomUtility = Instance.new("ScreenGui")
		local Hub = Instance.new("Frame")
		local Title = Instance.new("TextLabel")
		local Pages = Instance.new("ScrollingFrame")
		local Frame = Instance.new("Frame")
		local Frame_2 = Instance.new("Frame")
		local Previous = Instance.new("TextButton")
		local Next = Instance.new("TextButton")
		local PageNum = Instance.new("TextButton")
		CustomUtility.Name = "Custom Utility"
		CustomUtility.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
		CustomUtility.DisplayOrder = 5
		CustomUtility.ResetOnSpawn = false
		Hub.Name = "Hub"
		Hub.Parent = CustomUtility
		Hub.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
		Hub.BorderColor3 = Color3.fromRGB(40, 40, 40)
		Hub.Position = UDim2.new(0, 57, 0, 37)
		Hub.Size = UDim2.new(0, 500, 0, 300)
		Hub.Draggable = true
		Hub.Active = true
		Hub.Selectable = true
		Title.Name = "Title"
		Title.Parent = Hub
		Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Title.BackgroundTransparency = 1.000
		Title.Size = UDim2.new(0, 500, 0, 30)
		Title.Font = Enum.Font.GothamMedium
		Title.Text = "Example"
		Title.TextColor3 = Color3.fromRGB(255, 255, 255)
		Title.TextScaled = true
		Title.TextSize = 14.000
		Title.TextWrapped = true
		Pages.Name = "Pages"
		Pages.Parent = Hub
		Pages.Active = true
		Pages.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Pages.BackgroundTransparency = 1.000
		Pages.BorderSizePixel = 0
		Pages.Position = UDim2.new(0, 0, 0, 30)
		Pages.Size = UDim2.new(0, 500, 0, 220)
		Pages.CanvasSize = UDim2.new(0, 0, 0, 0)
		Frame.Parent = Pages
		Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Frame.BackgroundTransparency = 1.000
		Frame.Size = UDim2.new(1, 0, 1, 0)
		Frame_2.Parent = Hub
		Frame_2.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		Frame_2.BorderColor3 = Color3.fromRGB(46, 46, 46)
		Frame_2.Position = UDim2.new(0, 0, 0, 250)
		Frame_2.Size = UDim2.new(0, 500, 0, 50)
		Previous.Name = "Previous"
		Previous.Parent = Frame_2
		Previous.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		Previous.BorderColor3 = Color3.fromRGB(55, 55, 55)
		Previous.Size = UDim2.new(0, 50, 0, 50)
		Previous.Font = Enum.Font.GothamMedium
		Previous.Text = "<"
		Previous.TextColor3 = Color3.fromRGB(255, 255, 255)
		Previous.TextScaled = true
		Previous.TextSize = 14.000
		Previous.TextWrapped = true
		Next.Name = "Next"
		Next.Parent = Frame_2
		Next.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		Next.BorderColor3 = Color3.fromRGB(55, 55, 55)
		Next.Position = UDim2.new(0, 450, 0, 0)
		Next.Size = UDim2.new(0, 50, 0, 50)
		Next.Font = Enum.Font.GothamMedium
		Next.Text = ">"
		Next.TextColor3 = Color3.fromRGB(255, 255, 255)
		Next.TextScaled = true
		Next.TextSize = 14.000
		Next.TextWrapped = true
		PageNum.Name = "PageNum"
		PageNum.Parent = Frame_2
		PageNum.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		PageNum.BackgroundTransparency = 1.000
		PageNum.BorderColor3 = Color3.fromRGB(55, 55, 55)
		PageNum.Position = UDim2.new(0, 155, 0, 0)
		PageNum.Size = UDim2.new(0, 190, 0, 50)
		PageNum.Font = Enum.Font.GothamMedium
		PageNum.Text = "1"
		PageNum.TextColor3 = Color3.fromRGB(255, 255, 255)
		PageNum.TextScaled = true
		PageNum.TextSize = 14.000
		PageNum.TextWrapped = true
		local TextButton = Instance.new("TextButton")
		TextButton.Parent = Title
		TextButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
		TextButton.BorderColor3 = Color3.fromRGB(170, 50, 50)
		TextButton.Position = UDim2.new(0, 470, 0, 0)
		TextButton.Size = UDim2.new(0, 30, 0, 30)
		TextButton.Font = Enum.Font.GothamMedium
		TextButton.Text = "X"
		TextButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		TextButton.TextScaled = true
		TextButton.TextSize = 14.000
		TextButton.TextWrapped = true
		local Rendering = game:GetService("UserInputService").InputBegan:Connect(function(key)
			if key.KeyCode == Enum.KeyCode.R then
				CustomUtility.Enabled = not CustomUtility.Enabled
			end
		end)
		TextButton.MouseButton1Click:Connect(function()
			CustomUtility:Destroy()
			Rendering:Disconnect()
		end)
		return CustomUtility
	end
	local Gui = CreateUtility()
	Gui.Name = title
	Gui.Hub.Title.Text = title
	local function ShowPage(tab)
		for i,v in pairs(Gui.Hub.Pages.Frame:GetChildren()) do
			if v.Name == tab.PageName then
				v.Visible = true
			else
				v.Visible = false
			end
		end
	end
	Gui.Hub.Frame.Previous.MouseButton1Click:Connect(function()
		if currentPage == 1 then
			currentPage = #Pages
			ShowPage(Pages[#Pages])
		else
			currentPage = currentPage - 1
			ShowPage(Pages[currentPage])
		end
		PageChanged:Fire(currentPage)
	end)
	Gui.Hub.Frame.Next.MouseButton1Click:Connect(function()
		if currentPage == #Pages then
			currentPage = 1
			ShowPage(Pages[1])
		else
			currentPage = currentPage + 1
			ShowPage(Pages[currentPage])
		end
		PageChanged:Fire(currentPage)
	end)
	PageChanged.Event:Connect(function()
		Gui.Hub.Frame.PageNum.Text = tostring(currentPage)
	end)
	function Utility2:CreatePage(Name:string)
		Pages[#Pages + 1] = {PageNum = #Pages+1, PageName = Name}
		local vis = true
		if #Pages ~= 1 then
			vis = false
		end
		local Utility3 = {}
		local Page = Instance.new("ScrollingFrame",Gui.Hub.Pages.Frame)
		local Grid = Instance.new("UIGridLayout",Page)
		Grid.CellSize = UDim2.new(0,160,0,50)
		Page.Name = Name
		Page.BackgroundTransparency = 1
		Page.Size = UDim2.new(1,0,1,0)
		Page.Visible = vis
		Page.ChildAdded:Connect(function()
			local Udim = UDim2.new(0,0,0, Grid.AbsoluteContentSize.Y + Page.Size.Y.Offset + Grid.CellPadding.Y.Offset)
			Page.CanvasSize = Udim
		end)
		function Utility3:CreateButton(text,callback,orderLayout)
			local FK = Instance.new("TextButton")
			FK.Name = text
			FK.Parent = Page
			FK.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
			FK.BorderColor3 = Color3.fromRGB(55, 55, 55)
			FK.Size = UDim2.new(0, 50, 0, 50)
			FK.Font = Enum.Font.GothamMedium
			FK.Text = text
			FK.TextColor3 = Color3.fromRGB(255, 255, 255)
			FK.TextScaled = true
			FK.TextSize = 14.000
			FK.TextWrapped = true
			if orderLayout then
				FK.LayoutOrder = orderLayout
			end
			FK.MouseButton1Click:Connect(function()
				pcall(callback)
			end)
			local buttonEtc = {}
			function buttonEtc:Refresh(txt:string)
				FK.Text = txt
				return buttonEtc
			end
			return buttonEtc
		end
		return Utility3
	end
	return Utility2
end

return Utility
